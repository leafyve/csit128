        <script>
        // We are putting the JavaScript in the head, so we use window.onload
        window.onload = function() {
            setCurrentDate();

            // Form submission event
            document.getElementById('part4Form').addEventListener('submit', function(event) {
                event.preventDefault();
                if (validateForm()) {
                    openGoogleTranslate();
                }
            });

            // Find field event to enable/disable replace field
            var findField = document.getElementById('findText');
            var replaceField = document.getElementById('replaceText');
            findField.addEventListener('input', function() {
                if (findField.value.trim() === '') {
                    replaceField.disabled = true;
                } else {
                    replaceField.disabled = false;
                }
            });
            // Initial state of replace field
            replaceField.disabled = (findField.value.trim() === '');
        };

        function setCurrentDate() {
            var now = new Date();
            var dayOfMonth = now.getDate();
            var month = now.toLocaleString('default', { month: 'long' });
            var year = now.getFullYear();
            var dayOfWeek = now.toLocaleString('default', { weekday: 'long' });
            var hours = now.getHours();
            var minutes = now.getMinutes();
            var ampm = hours >= 12 ? 'PM' : 'AM';
            hours = hours % 12;
            hours = hours ? hours : 12; // the hour '0' should be '12'
            var timeString = hours + ':' + (minutes < 10 ? '0' + minutes : minutes) + ' ' + ampm;

            var currentDateString = dayOfMonth + ' ' + month + ' ' + year + ' ' + dayOfWeek + ' ' + timeString;
            document.getElementById('currentDate').value = currentDateString;
        }

        function validateForm() {
            var name = document.getElementById('name').value.trim();
            var moduleCode = document.getElementById('moduleCode').value.trim();
            var namePattern = /^[A-Za-z\s]+$/;
            var modulePattern = /^[A-Z]{2}[4-8]{3}$/;

            // Clear previous errors
            document.getElementById('nameError').innerHTML = '';
            document.getElementById('moduleCodeError').innerHTML = '';

            var isValid = true;

            // Validate name
            if (name === '') {
                document.getElementById('nameError').innerHTML = 'Name cannot be blank';
                isValid = false;
            } else if (!namePattern.test(name)) {
                document.getElementById('nameError').innerHTML = 'Name should only contain letters and spaces';
                isValid = false;
            }

            // Validate module code (only if not empty)
            if (moduleCode !== '' && !modulePattern.test(moduleCode)) {
                document.getElementById('moduleCodeError').innerHTML = 'Module code must be 2 uppercase letters followed by 3 digits (4-8)';
                isValid = false;
            }

            return isValid;
        }

        function openGoogleTranslate() {
            var messageText = document.getElementById('message').value;
            var sourceLang = document.querySelector('input[name="sourceLang"]:checked').value;
            var targetLang = document.getElementById('targetLang').value;

            var encodedText = encodeURIComponent(messageText);
            var url = `https://translate.google.com/?sl=${sourceLang}&tl=${targetLang}&text=${encodedText}`;
            window.open(url, '_blank');
        }

        function handleFindAndReplace() {
            var findText = document.getElementById('findText').value;
            var replaceText = document.getElementById('replaceText').value;
            var messageTextarea = document.getElementById('message');
            var message = messageTextarea.value;

            if (findText === '') {
                alert('Find field cannot be empty for replacement.');
                return;
            }

            // Escape special characters in findText for regex
            var escapedFindText = findText.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
            var regex = new RegExp(escapedFindText, 'g');
            var newMessage = message.replace(regex, replaceText);
            var count = (message.match(regex) || []).length;

            messageTextarea.value = newMessage;
            document.getElementById('replaceCount').textContent = count + ' replacement(s) made.';
        }
    </script>
    
    <!-- Part 4 -->
    <h1>Part 4: Form</h1>
    <form id="part4Form">
        <table >
            <!-- Name Field -->
            <tr>
                <td>Name:</td>
                <td>
                    <input id="name" type="text" name="name">
                </td>
            </tr>
            <tr>
                <td></td>
                <td>
                    <span id="nameError" style="color: red;"></span>
                </td>
            </tr>

            <!-- Module Code Field -->
            <tr>
                <td>Module Code:</td>
                <td>
                    <input type="text" name="moduleCode" id="moduleCode">
                </td>
            </tr>
            <tr>
                <td></td>
                <td>
                    <span id="moduleCodeError" style="color: red;"></span>
                </td>
            </tr>

            <!-- Current Date Field -->
            <tr>
                <td>Current date:</td>
                <td>
                    <input type="text" name="currentDate" id="currentDate" readonly>
                </td>
            </tr>

            <!-- Message Field -->
            <tr>
                <td>Message:</td>
                <td>
                    <textarea name="message" id="message" rows="5" cols="30" required>Hello 202509</textarea>
                </td>
            </tr>

            <!-- Find Field -->
            <tr>
                <td>Find:</td>
                <td>
                    <input type="text" id="findText">
                </td>
            </tr>

            <!-- Replace Field -->
            <tr>
                <td>Replace:</td>
                <td>
                    <input type="text" id="replaceText">
                </td>
            </tr>

            <!-- Find and Replace Button -->
            <tr>
                <td></td>
                <td>
                    <button type="button" onclick="handleFindAndReplace()">Find and Replace</button>
                    <span id="replaceCount"></span>
                </td>
            </tr>

            <!-- Source Language -->
            <tr>
                <td>Source Language</td>
                <td>
                    <input type="radio" id="english" name="sourceLang" value="en" checked>
                    <label for="english">English</label>
                    <input type="radio" id="malay" name="sourceLang" value="ms">
                    <label for="malay">Malay</label>
                </td>
            </tr>

            <!-- Target Language -->
            <tr>
                <td>Target Language</td>
                <td>
                    <select name="targetLang" id="targetLang">
                        <option value="zh">Chinese</option>
                        <option value="ja">Japanese</option>
                        <option value="ko">Korean</option>
                    </select>
                </td>
            </tr>

            <!-- Translate and Reset Buttons -->
            <tr>
                <td></td>
                <td>
                    <button type="submit">Translate</button>
                    <button type="reset">Reset</button>
                </td>
            </tr>
        </table>
    </form>

    
